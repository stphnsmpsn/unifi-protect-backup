include:
  - project: 'stphnsmpsn/ci-templates'
    file:
      - .gitlab-docker.yml
      - .gitlab-rust.yml
      - .gitlab-mkdocs.yml

stages:
  - check
  - test
  - build
  - deploy
  - release

build::docker::unifi-protect-backup:
  stage: release
  extends: .docker::build
  needs: [ 'check::rust::clippy', 'check::rust::fmt', 'test::rust' ]
  only:
    - master

release::docker::unifi-protect-backup:
  stage: release
  extends: .docker::release
  needs: [ 'build::docker::unifi-protect-backup' ]
  only:
    - master